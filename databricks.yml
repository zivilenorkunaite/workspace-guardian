bundle:
  name: workspace-guardian

variables:
  catalog:
    description: Unity Catalog name
    default: zivile
  
  schema:
    description: Schema name for application tables
    default: workspace_guardian
  
  warehouse_id:
    description: SQL Warehouse ID for executing queries
    default: c2abb17a6c9e6bc0

targets:
  # Development target
  dev:
    mode: development
    default: true
    
  # Production target  
  prod:
    mode: production

resources:
  apps:
    workspace_guardian_app:
      name: workspace-guardian-${bundle.target}
      description: Workspace Guardian - Approval system for Databricks resources
      
      # Source directory for the app
      source_code_path: ./app
      
      # Environment variables for the app
      # Note: DATABRICKS_HOST and DATABRICKS_TOKEN are NOT needed
      # Databricks Apps use automatic authentication via the app's identity
      config:
        env:
          - name: DATABRICKS_WAREHOUSE_ID
            value: ${var.warehouse_id}
          - name: APP_CATALOG
            value: ${var.catalog}
          - name: APP_SCHEMA
            value: ${var.schema}
          - name: APP_VERSION
            value: "1.0.0"
